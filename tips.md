### 一、先纠正核心误区（最关键）
你的前半段完全正确，但后半段 **双下划线定义“不变变量”是错误认知**，这是新手最容易踩的坑，先把对错掰清楚：
✅ 正确部分：所有`__xxx__`都叫dunder names，是系统默认预定义+Python全局命名约定，专属特殊语义。
❌ 错误部分：Python中**从没有“双下划线表示变量不变”的约定**，恰恰相反，双下划线的核心作用和“变量是否可变”无关，且这个用法完全不符合Python文化。


### 二、逐句梳理+修正，精准对齐Python官方约定
#### 1. 你的正确认知（固化）
-  所有`__xxx__`统称 dunder names，属于Python**全局命名约定**（官方定的规则）；
-  大部分核心dunder names是**系统默认定义**（解释器自动赋值，如`__name__`/`__init__`），少部分是开发者按官方约定自定义（如类中写`__str__`）；
-  它是Python的内置语义标签，不是普通标识符，不能随便用。

#### 2. 核心误区修正：Python 表示“定义后不变的变量”，根本不用双下划线！
Python里没有真正的“常量”，但有明确约定表示“变量不建议修改”，和双下划线**完全无关**，正确约定分2种（这才是Python社区的文化传统）：
##### ① 普通场景（模块/类中）：单下划线开头 `_var`
表示「私有变量/不建议外部修改的变量」，纯约定层面，语法上能改，但开发者看到`_`开头就知道“不要动”。
```python
# 约定：_PI 不建议修改，视为“准不变量”
_PI = 3.1415926
def calc_circle(r):
    return 2 * _PI * r

_PI = 3  # 语法上能改，但不符合约定，属于不规范写法
```

##### ② 常量场景（全大写+单下划线分隔）：`UPPER_CASE`
这是Python表示“常量”的**唯一官方推荐约定**，全大写命名，明确告知所有人“此变量定义后禁止修改”，是社区通用的“不变变量”文化。
```python
# 标准常量写法：全大写，约定永不修改
PI = 3.1415926
MAX_CONNECT = 100
USER_NAME = "admin"

PI = 3  # 语法允许，但严重违反约定，属于错误写法
```


### 三、双下划线（dunder）真正的2个核心用途（和“不变”无关）
这才是Python官方定义的dunder命名约定，和“变量变不变”完全不沾边：
#### 1. 用途1：系统专属（解释器预定义）→ 有固定特殊语义
由Python解释器自动创建、赋值，有明确且不可替代的功能，开发者只能用，不能乱定义/修改，比如`__name__`/`__file__`/`__init__`，改了会破坏系统逻辑。
#### 2. 用途2：自定义类的特殊方法 → 实现内置行为扩展
开发者在类中自定义`__xxx__`方法，是为了让自定义类拥有Python内置类型的行为（如`__add__`支持`+`运算、`__str__`支持打印），属于面向对象的扩展，和“变量不变”无关。
```python
# 自定义dunder方法是为了扩展类的行为，不是定义不变量
class Book:
    def __init__(self, name):
        self.name = name  # 普通变量
    def __str__(self):
        return self.name  # 实现打印行为，和变量不变无关
```

#### 补充：类中双下划线开头结尾≠普通变量，类中还有一种「单前双下划线」`__var`（和dunder不同！）
很多人混淆「dunder（前后双下划线）」和「单前双下划线（`__var`）」，后者是类的**名称改写**，目的是隐藏私有属性，不是表示不变：
```python
class Person:
    def __init__(self):
        self.__age = 18  # 单前双下划线：名称改写，私有属性，不是dunder！
        self.name = "Tom"

p = Person()
print(p.name)  # 正常访问
print(p.__age)  # 报错：无法直接访问（私有）
# 本质是解释器把__age改成了 _Person__age，不是“不变”，是“隐藏”
print(p._Person__age)  # 语法上能访问，仍可修改
```
⚠️ 注意：这是「单前双下划线」，不是「前后双下划线的dunder」，二者完全不同，不要混淆！


### 四、Python命名文化传统总结（清晰避坑）
用一张表分清“不同下划线/命名”的用途，再也不混淆：
| 命名格式       | 官方约定用途                  | 是否表示“不变变量” | 属于dunder names吗 |
|----------------|-------------------------------|--------------------|--------------------|
| `__xxx__`      | 系统特殊语义/类的特殊方法     | ❌ 否               | ✅ 是               |
| `UPPER_CASE`   | 常量（约定永不修改）| ✅ 是（唯一常量约定）| ❌ 否               |
| `_var`         | 私有/不建议修改的准不变量     | ✅ 是（弱约定）| ❌ 否               |
| `__var`        | 类的私有属性（名称改写隐藏）| ❌ 否               | ❌ 否（不是前后双下） |
| `var`          | 普通可变变量                  | ❌ 否               | ❌ 否               |


### 最终核心总结
1.  dunder names（`__xxx__`）是系统特殊语义+全局命名约定，和“变量变不变”**毫无关系**，不要用来定义不变变量；
2.  Python表示“定义后不变的变量”，文化传统是「全大写命名（`UPPER_CASE`）」，这是唯一标准约定；
3.  双下划线乱用来定义普通变量，会被视为不规范写法，还可能和系统dunder变量冲突，完全不符合Python文化；
4.  记住：dunder是“系统/类的特殊功能标签”，全大写是“不变常量标签”，二者各司其职，不能混用！